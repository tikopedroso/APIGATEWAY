<!DOCTYPE html>
<html>
<head>
  <title>semver.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules\\semver\\semver.js";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h2">
        <a href="#numeric-identifier">Numeric Identifier</a>
      </div>

      <div class="heading h2">
        <a href="#non-numeric-identifier">Non-numeric Identifier</a>
      </div>

      <div class="heading h2">
        <a href="#main-version">Main Version</a>
      </div>

      <div class="heading h2">
        <a href="#pre-release-version-identifier">Pre-release Version Identifier</a>
      </div>

      <div class="heading h2">
        <a href="#pre-release-version">Pre-release Version</a>
      </div>

      <div class="heading h2">
        <a href="#build-metadata-identifier">Build Metadata Identifier</a>
      </div>

      <div class="heading h2">
        <a href="#build-metadata">Build Metadata</a>
      </div>

      <div class="heading h2">
        <a href="#full-version-string">Full Version String</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>semver.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">exports = <span class="hljs-built_in">module</span>.exports = SemVer

<span class="hljs-keyword">var</span> debug
<span class="hljs-comment">/* istanbul ignore next */</span>
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> process === <span class="hljs-string">'object'</span> &amp;&amp;
    process.env &amp;&amp;
    process.env.NODE_DEBUG &amp;&amp;
    <span class="hljs-regexp">/\bsemver\b/i</span>.test(process.env.NODE_DEBUG)) {
  debug = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> args = <span class="hljs-built_in">Array</span>.prototype.slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">0</span>)
    args.unshift(<span class="hljs-string">'SEMVER'</span>)
    <span class="hljs-built_in">console</span>.log.apply(<span class="hljs-built_in">console</span>, args)
  }
} <span class="hljs-keyword">else</span> {
  debug = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{}
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<p>Note: this is the semver.org version of the spec that it implements
Not necessarily the package version of this code.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">exports.SEMVER_SPEC_VERSION = <span class="hljs-string">'2.0.0'</span>

<span class="hljs-keyword">var</span> MAX_LENGTH = <span class="hljs-number">256</span>
<span class="hljs-keyword">var</span> MAX_SAFE_INTEGER = <span class="hljs-built_in">Number</span>.MAX_SAFE_INTEGER ||
  <span class="hljs-comment">/* istanbul ignore next */</span> <span class="hljs-number">9007199254740991</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<p>Max safe segment length for coercion.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> MAX_SAFE_COMPONENT_LENGTH = <span class="hljs-number">16</span>

<span class="hljs-keyword">var</span> MAX_SAFE_BUILD_LENGTH = MAX_LENGTH - <span class="hljs-number">6</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<p>The actual regexps go on exports.re</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> re = exports.re = []
<span class="hljs-keyword">var</span> safeRe = exports.safeRe = []
<span class="hljs-keyword">var</span> src = exports.src = []
<span class="hljs-keyword">var</span> t = exports.tokens = {}
<span class="hljs-keyword">var</span> R = <span class="hljs-number">0</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">tok</span> (<span class="hljs-params">n</span>) </span>{
  t[n] = R++
}

<span class="hljs-keyword">var</span> LETTERDASHNUMBER = <span class="hljs-string">'[a-zA-Z0-9-]'</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<p>Replace some greedy regex tokens to prevent regex dos issues. These regex are
used internally via the safeRe object since all inputs in this library get
normalized first to trim and collapse all extra whitespace. The original
regexes are exported for userland consumption and lower level usage. A
future breaking change could export the safer regex only with a note that
all input should have extra whitespace removed.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> safeRegexReplacements = [
  [<span class="hljs-string">'\\s'</span>, <span class="hljs-number">1</span>],
  [<span class="hljs-string">'\\d'</span>, MAX_LENGTH],
  [LETTERDASHNUMBER, MAX_SAFE_BUILD_LENGTH],
]

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeSafeRe</span> (<span class="hljs-params">value</span>) </span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; safeRegexReplacements.length; i++) {
    <span class="hljs-keyword">var</span> token = safeRegexReplacements[i][<span class="hljs-number">0</span>]
    <span class="hljs-keyword">var</span> max = safeRegexReplacements[i][<span class="hljs-number">1</span>]
    value = value
      .split(token + <span class="hljs-string">'*'</span>).join(token + <span class="hljs-string">'{0,'</span> + max + <span class="hljs-string">'}'</span>)
      .split(token + <span class="hljs-string">'+'</span>).join(token + <span class="hljs-string">'{1,'</span> + max + <span class="hljs-string">'}'</span>)
  }
  <span class="hljs-keyword">return</span> value
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<p>The following Regular Expressions can be used for tokenizing,
validating, and parsing SemVer version strings.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="numeric-identifier">
  <h2>
    <a href="#numeric-identifier" name="numeric-identifier" class="pilcrow"></a>
Numeric Identifier
  </h2>
</div>
<p>A single <code>0</code>, or a non-zero digit followed by zero or more digits.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
tok(<span class="hljs-string">'NUMERICIDENTIFIER'</span>)
src[t.NUMERICIDENTIFIER] = <span class="hljs-string">'0|[1-9]\\d*'</span>
tok(<span class="hljs-string">'NUMERICIDENTIFIERLOOSE'</span>)
src[t.NUMERICIDENTIFIERLOOSE] = <span class="hljs-string">'\\d+'</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="non-numeric-identifier">
  <h2>
    <a href="#non-numeric-identifier" name="non-numeric-identifier" class="pilcrow"></a>
Non-numeric Identifier
  </h2>
</div>
<p>Zero or more digits, followed by a letter or hyphen, and then zero or
more letters, digits, or hyphens.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
tok(<span class="hljs-string">'NONNUMERICIDENTIFIER'</span>)
src[t.NONNUMERICIDENTIFIER] = <span class="hljs-string">'\\d*[a-zA-Z-]'</span> + LETTERDASHNUMBER + <span class="hljs-string">'*'</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="main-version">
  <h2>
    <a href="#main-version" name="main-version" class="pilcrow"></a>
Main Version
  </h2>
</div>
<p>Three dot-separated numeric identifiers.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
tok(<span class="hljs-string">'MAINVERSION'</span>)
src[t.MAINVERSION] = <span class="hljs-string">'('</span> + src[t.NUMERICIDENTIFIER] + <span class="hljs-string">')\\.'</span> +
                   <span class="hljs-string">'('</span> + src[t.NUMERICIDENTIFIER] + <span class="hljs-string">')\\.'</span> +
                   <span class="hljs-string">'('</span> + src[t.NUMERICIDENTIFIER] + <span class="hljs-string">')'</span>

tok(<span class="hljs-string">'MAINVERSIONLOOSE'</span>)
src[t.MAINVERSIONLOOSE] = <span class="hljs-string">'('</span> + src[t.NUMERICIDENTIFIERLOOSE] + <span class="hljs-string">')\\.'</span> +
                        <span class="hljs-string">'('</span> + src[t.NUMERICIDENTIFIERLOOSE] + <span class="hljs-string">')\\.'</span> +
                        <span class="hljs-string">'('</span> + src[t.NUMERICIDENTIFIERLOOSE] + <span class="hljs-string">')'</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="pre-release-version-identifier">
  <h2>
    <a href="#pre-release-version-identifier" name="pre-release-version-identifier" class="pilcrow"></a>
Pre-release Version Identifier
  </h2>
</div>
<p>A numeric identifier, or a non-numeric identifier.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
tok(<span class="hljs-string">'PRERELEASEIDENTIFIER'</span>)
src[t.PRERELEASEIDENTIFIER] = <span class="hljs-string">'(?:'</span> + src[t.NUMERICIDENTIFIER] +
                            <span class="hljs-string">'|'</span> + src[t.NONNUMERICIDENTIFIER] + <span class="hljs-string">')'</span>

tok(<span class="hljs-string">'PRERELEASEIDENTIFIERLOOSE'</span>)
src[t.PRERELEASEIDENTIFIERLOOSE] = <span class="hljs-string">'(?:'</span> + src[t.NUMERICIDENTIFIERLOOSE] +
                                 <span class="hljs-string">'|'</span> + src[t.NONNUMERICIDENTIFIER] + <span class="hljs-string">')'</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="pre-release-version">
  <h2>
    <a href="#pre-release-version" name="pre-release-version" class="pilcrow"></a>
Pre-release Version
  </h2>
</div>
<p>Hyphen, followed by one or more dot-separated pre-release version
identifiers.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
tok(<span class="hljs-string">'PRERELEASE'</span>)
src[t.PRERELEASE] = <span class="hljs-string">'(?:-('</span> + src[t.PRERELEASEIDENTIFIER] +
                  <span class="hljs-string">'(?:\\.'</span> + src[t.PRERELEASEIDENTIFIER] + <span class="hljs-string">')*))'</span>

tok(<span class="hljs-string">'PRERELEASELOOSE'</span>)
src[t.PRERELEASELOOSE] = <span class="hljs-string">'(?:-?('</span> + src[t.PRERELEASEIDENTIFIERLOOSE] +
                       <span class="hljs-string">'(?:\\.'</span> + src[t.PRERELEASEIDENTIFIERLOOSE] + <span class="hljs-string">')*))'</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="build-metadata-identifier">
  <h2>
    <a href="#build-metadata-identifier" name="build-metadata-identifier" class="pilcrow"></a>
Build Metadata Identifier
  </h2>
</div>
<p>Any combination of digits, letters, or hyphens.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
tok(<span class="hljs-string">'BUILDIDENTIFIER'</span>)
src[t.BUILDIDENTIFIER] = LETTERDASHNUMBER + <span class="hljs-string">'+'</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="build-metadata">
  <h2>
    <a href="#build-metadata" name="build-metadata" class="pilcrow"></a>
Build Metadata
  </h2>
</div>
<p>Plus sign, followed by one or more period-separated build metadata
identifiers.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
tok(<span class="hljs-string">'BUILD'</span>)
src[t.BUILD] = <span class="hljs-string">'(?:\\+('</span> + src[t.BUILDIDENTIFIER] +
             <span class="hljs-string">'(?:\\.'</span> + src[t.BUILDIDENTIFIER] + <span class="hljs-string">')*))'</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="full-version-string">
  <h2>
    <a href="#full-version-string" name="full-version-string" class="pilcrow"></a>
Full Version String
  </h2>
</div>
<p>A main version, followed optionally by a pre-release version and
build metadata.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15"></a>
</div>
<p>Note that the only major, minor, patch, and pre-release sections of
the version string are capturing groups.  The build metadata is not a
capturing group, because it should not ever be used in version
comparison.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
tok(<span class="hljs-string">'FULL'</span>)
tok(<span class="hljs-string">'FULLPLAIN'</span>)
src[t.FULLPLAIN] = <span class="hljs-string">'v?'</span> + src[t.MAINVERSION] +
                  src[t.PRERELEASE] + <span class="hljs-string">'?'</span> +
                  src[t.BUILD] + <span class="hljs-string">'?'</span>

src[t.FULL] = <span class="hljs-string">'^'</span> + src[t.FULLPLAIN] + <span class="hljs-string">'$'</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16"></a>
</div>
<p>like full, but allows v1.2.3 and =1.2.3, which people do sometimes.
also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty
common in the npm registry.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">tok(<span class="hljs-string">'LOOSEPLAIN'</span>)
src[t.LOOSEPLAIN] = <span class="hljs-string">'[v=\\s]*'</span> + src[t.MAINVERSIONLOOSE] +
                  src[t.PRERELEASELOOSE] + <span class="hljs-string">'?'</span> +
                  src[t.BUILD] + <span class="hljs-string">'?'</span>

tok(<span class="hljs-string">'LOOSE'</span>)
src[t.LOOSE] = <span class="hljs-string">'^'</span> + src[t.LOOSEPLAIN] + <span class="hljs-string">'$'</span>

tok(<span class="hljs-string">'GTLT'</span>)
src[t.GTLT] = <span class="hljs-string">'((?:&lt;|&gt;)?=?)'</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17"></a>
</div>
<p>Something like &quot;2.*&quot; or &quot;1.2.x&quot;.
Note that &quot;x.x&quot; is a valid xRange identifer, meaning &quot;any version&quot;
Only the first item is strictly required.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">tok(<span class="hljs-string">'XRANGEIDENTIFIERLOOSE'</span>)
src[t.XRANGEIDENTIFIERLOOSE] = src[t.NUMERICIDENTIFIERLOOSE] + <span class="hljs-string">'|x|X|\\*'</span>
tok(<span class="hljs-string">'XRANGEIDENTIFIER'</span>)
src[t.XRANGEIDENTIFIER] = src[t.NUMERICIDENTIFIER] + <span class="hljs-string">'|x|X|\\*'</span>

tok(<span class="hljs-string">'XRANGEPLAIN'</span>)
src[t.XRANGEPLAIN] = <span class="hljs-string">'[v=\\s]*('</span> + src[t.XRANGEIDENTIFIER] + <span class="hljs-string">')'</span> +
                   <span class="hljs-string">'(?:\\.('</span> + src[t.XRANGEIDENTIFIER] + <span class="hljs-string">')'</span> +
                   <span class="hljs-string">'(?:\\.('</span> + src[t.XRANGEIDENTIFIER] + <span class="hljs-string">')'</span> +
                   <span class="hljs-string">'(?:'</span> + src[t.PRERELEASE] + <span class="hljs-string">')?'</span> +
                   src[t.BUILD] + <span class="hljs-string">'?'</span> +
                   <span class="hljs-string">')?)?'</span>

tok(<span class="hljs-string">'XRANGEPLAINLOOSE'</span>)
src[t.XRANGEPLAINLOOSE] = <span class="hljs-string">'[v=\\s]*('</span> + src[t.XRANGEIDENTIFIERLOOSE] + <span class="hljs-string">')'</span> +
                        <span class="hljs-string">'(?:\\.('</span> + src[t.XRANGEIDENTIFIERLOOSE] + <span class="hljs-string">')'</span> +
                        <span class="hljs-string">'(?:\\.('</span> + src[t.XRANGEIDENTIFIERLOOSE] + <span class="hljs-string">')'</span> +
                        <span class="hljs-string">'(?:'</span> + src[t.PRERELEASELOOSE] + <span class="hljs-string">')?'</span> +
                        src[t.BUILD] + <span class="hljs-string">'?'</span> +
                        <span class="hljs-string">')?)?'</span>

tok(<span class="hljs-string">'XRANGE'</span>)
src[t.XRANGE] = <span class="hljs-string">'^'</span> + src[t.GTLT] + <span class="hljs-string">'\\s*'</span> + src[t.XRANGEPLAIN] + <span class="hljs-string">'$'</span>
tok(<span class="hljs-string">'XRANGELOOSE'</span>)
src[t.XRANGELOOSE] = <span class="hljs-string">'^'</span> + src[t.GTLT] + <span class="hljs-string">'\\s*'</span> + src[t.XRANGEPLAINLOOSE] + <span class="hljs-string">'$'</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18"></a>
</div>
<p>Coercion.
Extract anything that could conceivably be a part of a valid semver</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">tok(<span class="hljs-string">'COERCE'</span>)
src[t.COERCE] = <span class="hljs-string">'(^|[^\\d])'</span> +
              <span class="hljs-string">'(\\d{1,'</span> + MAX_SAFE_COMPONENT_LENGTH + <span class="hljs-string">'})'</span> +
              <span class="hljs-string">'(?:\\.(\\d{1,'</span> + MAX_SAFE_COMPONENT_LENGTH + <span class="hljs-string">'}))?'</span> +
              <span class="hljs-string">'(?:\\.(\\d{1,'</span> + MAX_SAFE_COMPONENT_LENGTH + <span class="hljs-string">'}))?'</span> +
              <span class="hljs-string">'(?:$|[^\\d])'</span>
tok(<span class="hljs-string">'COERCERTL'</span>)
re[t.COERCERTL] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(src[t.COERCE], <span class="hljs-string">'g'</span>)
safeRe[t.COERCERTL] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(makeSafeRe(src[t.COERCE]), <span class="hljs-string">'g'</span>)

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19"></a>
</div>
<p>Tilde ranges.
Meaning is &quot;reasonably at or greater than&quot;</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">tok(<span class="hljs-string">'LONETILDE'</span>)
src[t.LONETILDE] = <span class="hljs-string">'(?:~&gt;?)'</span>

tok(<span class="hljs-string">'TILDETRIM'</span>)
src[t.TILDETRIM] = <span class="hljs-string">'(\\s*)'</span> + src[t.LONETILDE] + <span class="hljs-string">'\\s+'</span>
re[t.TILDETRIM] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(src[t.TILDETRIM], <span class="hljs-string">'g'</span>)
safeRe[t.TILDETRIM] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(makeSafeRe(src[t.TILDETRIM]), <span class="hljs-string">'g'</span>)
<span class="hljs-keyword">var</span> tildeTrimReplace = <span class="hljs-string">'$1~'</span>

tok(<span class="hljs-string">'TILDE'</span>)
src[t.TILDE] = <span class="hljs-string">'^'</span> + src[t.LONETILDE] + src[t.XRANGEPLAIN] + <span class="hljs-string">'$'</span>
tok(<span class="hljs-string">'TILDELOOSE'</span>)
src[t.TILDELOOSE] = <span class="hljs-string">'^'</span> + src[t.LONETILDE] + src[t.XRANGEPLAINLOOSE] + <span class="hljs-string">'$'</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20"></a>
</div>
<p>Caret ranges.
Meaning is &quot;at least and backwards compatible with&quot;</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">tok(<span class="hljs-string">'LONECARET'</span>)
src[t.LONECARET] = <span class="hljs-string">'(?:\\^)'</span>

tok(<span class="hljs-string">'CARETTRIM'</span>)
src[t.CARETTRIM] = <span class="hljs-string">'(\\s*)'</span> + src[t.LONECARET] + <span class="hljs-string">'\\s+'</span>
re[t.CARETTRIM] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(src[t.CARETTRIM], <span class="hljs-string">'g'</span>)
safeRe[t.CARETTRIM] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(makeSafeRe(src[t.CARETTRIM]), <span class="hljs-string">'g'</span>)
<span class="hljs-keyword">var</span> caretTrimReplace = <span class="hljs-string">'$1^'</span>

tok(<span class="hljs-string">'CARET'</span>)
src[t.CARET] = <span class="hljs-string">'^'</span> + src[t.LONECARET] + src[t.XRANGEPLAIN] + <span class="hljs-string">'$'</span>
tok(<span class="hljs-string">'CARETLOOSE'</span>)
src[t.CARETLOOSE] = <span class="hljs-string">'^'</span> + src[t.LONECARET] + src[t.XRANGEPLAINLOOSE] + <span class="hljs-string">'$'</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21"></a>
</div>
<p>A simple gt/lt/eq thing, or just &quot;&quot; to indicate &quot;any version&quot;</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">tok(<span class="hljs-string">'COMPARATORLOOSE'</span>)
src[t.COMPARATORLOOSE] = <span class="hljs-string">'^'</span> + src[t.GTLT] + <span class="hljs-string">'\\s*('</span> + src[t.LOOSEPLAIN] + <span class="hljs-string">')$|^$'</span>
tok(<span class="hljs-string">'COMPARATOR'</span>)
src[t.COMPARATOR] = <span class="hljs-string">'^'</span> + src[t.GTLT] + <span class="hljs-string">'\\s*('</span> + src[t.FULLPLAIN] + <span class="hljs-string">')$|^$'</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22"></a>
</div>
<p>An expression to strip any whitespace between the gtlt and the thing
it modifies, so that <code>&gt; 1.2.3</code> ==&gt; <code>&gt;1.2.3</code></p>

        </td>
        <td class="code highlight">
          <pre class="javascript">tok(<span class="hljs-string">'COMPARATORTRIM'</span>)
src[t.COMPARATORTRIM] = <span class="hljs-string">'(\\s*)'</span> + src[t.GTLT] +
                      <span class="hljs-string">'\\s*('</span> + src[t.LOOSEPLAIN] + <span class="hljs-string">'|'</span> + src[t.XRANGEPLAIN] + <span class="hljs-string">')'</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23"></a>
</div>
<p>this one has to use the /g flag</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">re[t.COMPARATORTRIM] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(src[t.COMPARATORTRIM], <span class="hljs-string">'g'</span>)
safeRe[t.COMPARATORTRIM] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(makeSafeRe(src[t.COMPARATORTRIM]), <span class="hljs-string">'g'</span>)
<span class="hljs-keyword">var</span> comparatorTrimReplace = <span class="hljs-string">'$1$2$3'</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-24" id="section-24"></a>
</div>
<p>Something like <code>1.2.3 - 1.2.4</code>
Note that these all use the loose form, because they'll be
checked against either the strict or loose comparator form
later.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">tok(<span class="hljs-string">'HYPHENRANGE'</span>)
src[t.HYPHENRANGE] = <span class="hljs-string">'^\\s*('</span> + src[t.XRANGEPLAIN] + <span class="hljs-string">')'</span> +
                   <span class="hljs-string">'\\s+-\\s+'</span> +
                   <span class="hljs-string">'('</span> + src[t.XRANGEPLAIN] + <span class="hljs-string">')'</span> +
                   <span class="hljs-string">'\\s*$'</span>

tok(<span class="hljs-string">'HYPHENRANGELOOSE'</span>)
src[t.HYPHENRANGELOOSE] = <span class="hljs-string">'^\\s*('</span> + src[t.XRANGEPLAINLOOSE] + <span class="hljs-string">')'</span> +
                        <span class="hljs-string">'\\s+-\\s+'</span> +
                        <span class="hljs-string">'('</span> + src[t.XRANGEPLAINLOOSE] + <span class="hljs-string">')'</span> +
                        <span class="hljs-string">'\\s*$'</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-25" id="section-25"></a>
</div>
<p>Star ranges basically just allow anything at all.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">tok(<span class="hljs-string">'STAR'</span>)
src[t.STAR] = <span class="hljs-string">'(&lt;|&gt;)?=?\\s*\\*'</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-26" id="section-26"></a>
</div>
<p>Compile to actual regexp objects.
All are flag-free, unless they were created above with a flag.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; R; i++) {
  debug(i, src[i])
  <span class="hljs-keyword">if</span> (!re[i]) {
    re[i] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(src[i])

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-27" id="section-27"></a>
</div>
<p>Replace all greedy whitespace to prevent regex dos issues. These regex are
used internally via the safeRe object since all inputs in this library get
normalized first to trim and collapse all extra whitespace. The original
regexes are exported for userland consumption and lower level usage. A
future breaking change could export the safer regex only with a note that
all input should have extra whitespace removed.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    safeRe[i] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(makeSafeRe(src[i]))
  }
}

exports.parse = parse
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parse</span> (<span class="hljs-params">version, options</span>) </span>{
  <span class="hljs-keyword">if</span> (!options || <span class="hljs-keyword">typeof</span> options !== <span class="hljs-string">'object'</span>) {
    options = {
      <span class="hljs-attr">loose</span>: !!options,
      <span class="hljs-attr">includePrerelease</span>: <span class="hljs-literal">false</span>
    }
  }

  <span class="hljs-keyword">if</span> (version <span class="hljs-keyword">instanceof</span> SemVer) {
    <span class="hljs-keyword">return</span> version
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> version !== <span class="hljs-string">'string'</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
  }

  <span class="hljs-keyword">if</span> (version.length &gt; MAX_LENGTH) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
  }

  <span class="hljs-keyword">var</span> r = options.loose ? safeRe[t.LOOSE] : safeRe[t.FULL]
  <span class="hljs-keyword">if</span> (!r.test(version)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
  }

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> SemVer(version, options)
  } <span class="hljs-keyword">catch</span> (er) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
  }
}

exports.valid = valid
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">valid</span> (<span class="hljs-params">version, options</span>) </span>{
  <span class="hljs-keyword">var</span> v = parse(version, options)
  <span class="hljs-keyword">return</span> v ? v.version : <span class="hljs-literal">null</span>
}

exports.clean = clean
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clean</span> (<span class="hljs-params">version, options</span>) </span>{
  <span class="hljs-keyword">var</span> s = parse(version.trim().replace(<span class="hljs-regexp">/^[=v]+/</span>, <span class="hljs-string">''</span>), options)
  <span class="hljs-keyword">return</span> s ? s.version : <span class="hljs-literal">null</span>
}

exports.SemVer = SemVer

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">SemVer</span> (<span class="hljs-params">version, options</span>) </span>{
  <span class="hljs-keyword">if</span> (!options || <span class="hljs-keyword">typeof</span> options !== <span class="hljs-string">'object'</span>) {
    options = {
      <span class="hljs-attr">loose</span>: !!options,
      <span class="hljs-attr">includePrerelease</span>: <span class="hljs-literal">false</span>
    }
  }
  <span class="hljs-keyword">if</span> (version <span class="hljs-keyword">instanceof</span> SemVer) {
    <span class="hljs-keyword">if</span> (version.loose === options.loose) {
      <span class="hljs-keyword">return</span> version
    } <span class="hljs-keyword">else</span> {
      version = version.version
    }
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> version !== <span class="hljs-string">'string'</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Invalid Version: '</span> + version)
  }

  <span class="hljs-keyword">if</span> (version.length &gt; MAX_LENGTH) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'version is longer than '</span> + MAX_LENGTH + <span class="hljs-string">' characters'</span>)
  }

  <span class="hljs-keyword">if</span> (!(<span class="hljs-keyword">this</span> <span class="hljs-keyword">instanceof</span> SemVer)) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> SemVer(version, options)
  }

  debug(<span class="hljs-string">'SemVer'</span>, version, options)
  <span class="hljs-keyword">this</span>.options = options
  <span class="hljs-keyword">this</span>.loose = !!options.loose

  <span class="hljs-keyword">var</span> m = version.trim().match(options.loose ? safeRe[t.LOOSE] : safeRe[t.FULL])

  <span class="hljs-keyword">if</span> (!m) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Invalid Version: '</span> + version)
  }

  <span class="hljs-keyword">this</span>.raw = version

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-28" id="section-28"></a>
</div>
<p>these are actually numbers</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">this</span>.major = +m[<span class="hljs-number">1</span>]
  <span class="hljs-keyword">this</span>.minor = +m[<span class="hljs-number">2</span>]
  <span class="hljs-keyword">this</span>.patch = +m[<span class="hljs-number">3</span>]

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.major &gt; MAX_SAFE_INTEGER || <span class="hljs-keyword">this</span>.major &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Invalid major version'</span>)
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.minor &gt; MAX_SAFE_INTEGER || <span class="hljs-keyword">this</span>.minor &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Invalid minor version'</span>)
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.patch &gt; MAX_SAFE_INTEGER || <span class="hljs-keyword">this</span>.patch &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Invalid patch version'</span>)
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-29" id="section-29"></a>
</div>
<p>numberify any prerelease numeric ids</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (!m[<span class="hljs-number">4</span>]) {
    <span class="hljs-keyword">this</span>.prerelease = []
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">this</span>.prerelease = m[<span class="hljs-number">4</span>].split(<span class="hljs-string">'.'</span>).map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">id</span>) </span>{
      <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^[0-9]+$/</span>.test(id)) {
        <span class="hljs-keyword">var</span> num = +id
        <span class="hljs-keyword">if</span> (num &gt;= <span class="hljs-number">0</span> &amp;&amp; num &lt; MAX_SAFE_INTEGER) {
          <span class="hljs-keyword">return</span> num
        }
      }
      <span class="hljs-keyword">return</span> id
    })
  }

  <span class="hljs-keyword">this</span>.build = m[<span class="hljs-number">5</span>] ? m[<span class="hljs-number">5</span>].split(<span class="hljs-string">'.'</span>) : []
  <span class="hljs-keyword">this</span>.format()
}

SemVer.prototype.format = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">this</span>.version = <span class="hljs-keyword">this</span>.major + <span class="hljs-string">'.'</span> + <span class="hljs-keyword">this</span>.minor + <span class="hljs-string">'.'</span> + <span class="hljs-keyword">this</span>.patch
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.prerelease.length) {
    <span class="hljs-keyword">this</span>.version += <span class="hljs-string">'-'</span> + <span class="hljs-keyword">this</span>.prerelease.join(<span class="hljs-string">'.'</span>)
  }
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.version
}

SemVer.prototype.toString = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.version
}

SemVer.prototype.compare = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">other</span>) </span>{
  debug(<span class="hljs-string">'SemVer.compare'</span>, <span class="hljs-keyword">this</span>.version, <span class="hljs-keyword">this</span>.options, other)
  <span class="hljs-keyword">if</span> (!(other <span class="hljs-keyword">instanceof</span> SemVer)) {
    other = <span class="hljs-keyword">new</span> SemVer(other, <span class="hljs-keyword">this</span>.options)
  }

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.compareMain(other) || <span class="hljs-keyword">this</span>.comparePre(other)
}

SemVer.prototype.compareMain = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">other</span>) </span>{
  <span class="hljs-keyword">if</span> (!(other <span class="hljs-keyword">instanceof</span> SemVer)) {
    other = <span class="hljs-keyword">new</span> SemVer(other, <span class="hljs-keyword">this</span>.options)
  }

  <span class="hljs-keyword">return</span> compareIdentifiers(<span class="hljs-keyword">this</span>.major, other.major) ||
         compareIdentifiers(<span class="hljs-keyword">this</span>.minor, other.minor) ||
         compareIdentifiers(<span class="hljs-keyword">this</span>.patch, other.patch)
}

SemVer.prototype.comparePre = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">other</span>) </span>{
  <span class="hljs-keyword">if</span> (!(other <span class="hljs-keyword">instanceof</span> SemVer)) {
    other = <span class="hljs-keyword">new</span> SemVer(other, <span class="hljs-keyword">this</span>.options)
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-30" id="section-30"></a>
</div>
<p>NOT having a prerelease is &gt; having one</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.prerelease.length &amp;&amp; !other.prerelease.length) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.prerelease.length &amp;&amp; other.prerelease.length) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.prerelease.length &amp;&amp; !other.prerelease.length) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
  }

  <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>
  <span class="hljs-keyword">do</span> {
    <span class="hljs-keyword">var</span> a = <span class="hljs-keyword">this</span>.prerelease[i]
    <span class="hljs-keyword">var</span> b = other.prerelease[i]
    debug(<span class="hljs-string">'prerelease compare'</span>, i, a, b)
    <span class="hljs-keyword">if</span> (a === <span class="hljs-literal">undefined</span> &amp;&amp; b === <span class="hljs-literal">undefined</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (b === <span class="hljs-literal">undefined</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a === <span class="hljs-literal">undefined</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a === b) {
      <span class="hljs-keyword">continue</span>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> compareIdentifiers(a, b)
    }
  } <span class="hljs-keyword">while</span> (++i)
}

SemVer.prototype.compareBuild = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">other</span>) </span>{
  <span class="hljs-keyword">if</span> (!(other <span class="hljs-keyword">instanceof</span> SemVer)) {
    other = <span class="hljs-keyword">new</span> SemVer(other, <span class="hljs-keyword">this</span>.options)
  }

  <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>
  <span class="hljs-keyword">do</span> {
    <span class="hljs-keyword">var</span> a = <span class="hljs-keyword">this</span>.build[i]
    <span class="hljs-keyword">var</span> b = other.build[i]
    debug(<span class="hljs-string">'prerelease compare'</span>, i, a, b)
    <span class="hljs-keyword">if</span> (a === <span class="hljs-literal">undefined</span> &amp;&amp; b === <span class="hljs-literal">undefined</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (b === <span class="hljs-literal">undefined</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a === <span class="hljs-literal">undefined</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a === b) {
      <span class="hljs-keyword">continue</span>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> compareIdentifiers(a, b)
    }
  } <span class="hljs-keyword">while</span> (++i)
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-31" id="section-31"></a>
</div>
<p>preminor will bump the version up to the next minor release, and immediately
down to pre-release. premajor and prepatch work the same way.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">SemVer.prototype.inc = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">release, identifier</span>) </span>{
  <span class="hljs-keyword">switch</span> (release) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'premajor'</span>:
      <span class="hljs-keyword">this</span>.prerelease.length = <span class="hljs-number">0</span>
      <span class="hljs-keyword">this</span>.patch = <span class="hljs-number">0</span>
      <span class="hljs-keyword">this</span>.minor = <span class="hljs-number">0</span>
      <span class="hljs-keyword">this</span>.major++
      <span class="hljs-keyword">this</span>.inc(<span class="hljs-string">'pre'</span>, identifier)
      <span class="hljs-keyword">break</span>
    <span class="hljs-keyword">case</span> <span class="hljs-string">'preminor'</span>:
      <span class="hljs-keyword">this</span>.prerelease.length = <span class="hljs-number">0</span>
      <span class="hljs-keyword">this</span>.patch = <span class="hljs-number">0</span>
      <span class="hljs-keyword">this</span>.minor++
      <span class="hljs-keyword">this</span>.inc(<span class="hljs-string">'pre'</span>, identifier)
      <span class="hljs-keyword">break</span>
    <span class="hljs-keyword">case</span> <span class="hljs-string">'prepatch'</span>:
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-32" id="section-32"></a>
</div>
<p>If this is already a prerelease, it will bump to the next version
drop any prereleases that might already exist, since they are not
relevant at this point.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">this</span>.prerelease.length = <span class="hljs-number">0</span>
      <span class="hljs-keyword">this</span>.inc(<span class="hljs-string">'patch'</span>, identifier)
      <span class="hljs-keyword">this</span>.inc(<span class="hljs-string">'pre'</span>, identifier)
      <span class="hljs-keyword">break</span>
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-33" id="section-33"></a>
</div>
<p>If the input is a non-prerelease version, this acts the same as
prepatch.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">case</span> <span class="hljs-string">'prerelease'</span>:
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.prerelease.length === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">this</span>.inc(<span class="hljs-string">'patch'</span>, identifier)
      }
      <span class="hljs-keyword">this</span>.inc(<span class="hljs-string">'pre'</span>, identifier)
      <span class="hljs-keyword">break</span>

    <span class="hljs-keyword">case</span> <span class="hljs-string">'major'</span>:
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-34" id="section-34"></a>
</div>
<p>If this is a pre-major version, bump up to the same major version.
Otherwise increment major.
1.0.0-5 bumps to 1.0.0
1.1.0 bumps to 2.0.0</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.minor !== <span class="hljs-number">0</span> ||
          <span class="hljs-keyword">this</span>.patch !== <span class="hljs-number">0</span> ||
          <span class="hljs-keyword">this</span>.prerelease.length === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">this</span>.major++
      }
      <span class="hljs-keyword">this</span>.minor = <span class="hljs-number">0</span>
      <span class="hljs-keyword">this</span>.patch = <span class="hljs-number">0</span>
      <span class="hljs-keyword">this</span>.prerelease = []
      <span class="hljs-keyword">break</span>
    <span class="hljs-keyword">case</span> <span class="hljs-string">'minor'</span>:
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-35" id="section-35"></a>
</div>
<p>If this is a pre-minor version, bump up to the same minor version.
Otherwise increment minor.
1.2.0-5 bumps to 1.2.0
1.2.1 bumps to 1.3.0</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.patch !== <span class="hljs-number">0</span> || <span class="hljs-keyword">this</span>.prerelease.length === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">this</span>.minor++
      }
      <span class="hljs-keyword">this</span>.patch = <span class="hljs-number">0</span>
      <span class="hljs-keyword">this</span>.prerelease = []
      <span class="hljs-keyword">break</span>
    <span class="hljs-keyword">case</span> <span class="hljs-string">'patch'</span>:
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-36" id="section-36"></a>
</div>
<p>If this is not a pre-release version, it will increment the patch.
If it is a pre-release it will bump up to the same patch version.
1.2.0-5 patches to 1.2.0
1.2.0 patches to 1.2.1</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.prerelease.length === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">this</span>.patch++
      }
      <span class="hljs-keyword">this</span>.prerelease = []
      <span class="hljs-keyword">break</span>
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-37" id="section-37"></a>
</div>
<p>This probably shouldn't be used publicly.
1.0.0 &quot;pre&quot; would become 1.0.0-0 which is the wrong direction.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">case</span> <span class="hljs-string">'pre'</span>:
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.prerelease.length === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">this</span>.prerelease = [<span class="hljs-number">0</span>]
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">var</span> i = <span class="hljs-keyword">this</span>.prerelease.length
        <span class="hljs-keyword">while</span> (--i &gt;= <span class="hljs-number">0</span>) {
          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.prerelease[i] === <span class="hljs-string">'number'</span>) {
            <span class="hljs-keyword">this</span>.prerelease[i]++
            i = <span class="hljs-number">-2</span>
          }
        }
        <span class="hljs-keyword">if</span> (i === <span class="hljs-number">-1</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-38" id="section-38"></a>
</div>
<p>didn't increment anything</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">          <span class="hljs-keyword">this</span>.prerelease.push(<span class="hljs-number">0</span>)
        }
      }
      <span class="hljs-keyword">if</span> (identifier) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-39" id="section-39"></a>
</div>
<p>1.2.0-beta.1 bumps to 1.2.0-beta.2,
1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.prerelease[<span class="hljs-number">0</span>] === identifier) {
          <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(<span class="hljs-keyword">this</span>.prerelease[<span class="hljs-number">1</span>])) {
            <span class="hljs-keyword">this</span>.prerelease = [identifier, <span class="hljs-number">0</span>]
          }
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">this</span>.prerelease = [identifier, <span class="hljs-number">0</span>]
        }
      }
      <span class="hljs-keyword">break</span>

    <span class="hljs-attr">default</span>:
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'invalid increment argument: '</span> + release)
  }
  <span class="hljs-keyword">this</span>.format()
  <span class="hljs-keyword">this</span>.raw = <span class="hljs-keyword">this</span>.version
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>
}

exports.inc = inc
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">inc</span> (<span class="hljs-params">version, release, loose, identifier</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> (loose) === <span class="hljs-string">'string'</span>) {
    identifier = loose
    loose = <span class="hljs-literal">undefined</span>
  }

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> SemVer(version, loose).inc(release, identifier).version
  } <span class="hljs-keyword">catch</span> (er) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
  }
}

exports.diff = diff
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">diff</span> (<span class="hljs-params">version1, version2</span>) </span>{
  <span class="hljs-keyword">if</span> (eq(version1, version2)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">var</span> v1 = parse(version1)
    <span class="hljs-keyword">var</span> v2 = parse(version2)
    <span class="hljs-keyword">var</span> prefix = <span class="hljs-string">''</span>
    <span class="hljs-keyword">if</span> (v1.prerelease.length || v2.prerelease.length) {
      prefix = <span class="hljs-string">'pre'</span>
      <span class="hljs-keyword">var</span> defaultResult = <span class="hljs-string">'prerelease'</span>
    }
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> v1) {
      <span class="hljs-keyword">if</span> (key === <span class="hljs-string">'major'</span> || key === <span class="hljs-string">'minor'</span> || key === <span class="hljs-string">'patch'</span>) {
        <span class="hljs-keyword">if</span> (v1[key] !== v2[key]) {
          <span class="hljs-keyword">return</span> prefix + key
        }
      }
    }
    <span class="hljs-keyword">return</span> defaultResult <span class="hljs-comment">// may be undefined</span>
  }
}

exports.compareIdentifiers = compareIdentifiers

<span class="hljs-keyword">var</span> numeric = <span class="hljs-regexp">/^[0-9]+$/</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compareIdentifiers</span> (<span class="hljs-params">a, b</span>) </span>{
  <span class="hljs-keyword">var</span> anum = numeric.test(a)
  <span class="hljs-keyword">var</span> bnum = numeric.test(b)

  <span class="hljs-keyword">if</span> (anum &amp;&amp; bnum) {
    a = +a
    b = +b
  }

  <span class="hljs-keyword">return</span> a === b ? <span class="hljs-number">0</span>
    : (anum &amp;&amp; !bnum) ? <span class="hljs-number">-1</span>
    : (bnum &amp;&amp; !anum) ? <span class="hljs-number">1</span>
    : a &lt; b ? <span class="hljs-number">-1</span>
    : <span class="hljs-number">1</span>
}

exports.rcompareIdentifiers = rcompareIdentifiers
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rcompareIdentifiers</span> (<span class="hljs-params">a, b</span>) </span>{
  <span class="hljs-keyword">return</span> compareIdentifiers(b, a)
}

exports.major = major
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">major</span> (<span class="hljs-params">a, loose</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> SemVer(a, loose).major
}

exports.minor = minor
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">minor</span> (<span class="hljs-params">a, loose</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> SemVer(a, loose).minor
}

exports.patch = patch
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">patch</span> (<span class="hljs-params">a, loose</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> SemVer(a, loose).patch
}

exports.compare = compare
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compare</span> (<span class="hljs-params">a, b, loose</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> SemVer(a, loose).compare(<span class="hljs-keyword">new</span> SemVer(b, loose))
}

exports.compareLoose = compareLoose
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compareLoose</span> (<span class="hljs-params">a, b</span>) </span>{
  <span class="hljs-keyword">return</span> compare(a, b, <span class="hljs-literal">true</span>)
}

exports.compareBuild = compareBuild
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compareBuild</span> (<span class="hljs-params">a, b, loose</span>) </span>{
  <span class="hljs-keyword">var</span> versionA = <span class="hljs-keyword">new</span> SemVer(a, loose)
  <span class="hljs-keyword">var</span> versionB = <span class="hljs-keyword">new</span> SemVer(b, loose)
  <span class="hljs-keyword">return</span> versionA.compare(versionB) || versionA.compareBuild(versionB)
}

exports.rcompare = rcompare
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rcompare</span> (<span class="hljs-params">a, b, loose</span>) </span>{
  <span class="hljs-keyword">return</span> compare(b, a, loose)
}

exports.sort = sort
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sort</span> (<span class="hljs-params">list, loose</span>) </span>{
  <span class="hljs-keyword">return</span> list.sort(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">return</span> exports.compareBuild(a, b, loose)
  })
}

exports.rsort = rsort
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rsort</span> (<span class="hljs-params">list, loose</span>) </span>{
  <span class="hljs-keyword">return</span> list.sort(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">return</span> exports.compareBuild(b, a, loose)
  })
}

exports.gt = gt
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">gt</span> (<span class="hljs-params">a, b, loose</span>) </span>{
  <span class="hljs-keyword">return</span> compare(a, b, loose) &gt; <span class="hljs-number">0</span>
}

exports.lt = lt
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lt</span> (<span class="hljs-params">a, b, loose</span>) </span>{
  <span class="hljs-keyword">return</span> compare(a, b, loose) &lt; <span class="hljs-number">0</span>
}

exports.eq = eq
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">eq</span> (<span class="hljs-params">a, b, loose</span>) </span>{
  <span class="hljs-keyword">return</span> compare(a, b, loose) === <span class="hljs-number">0</span>
}

exports.neq = neq
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">neq</span> (<span class="hljs-params">a, b, loose</span>) </span>{
  <span class="hljs-keyword">return</span> compare(a, b, loose) !== <span class="hljs-number">0</span>
}

exports.gte = gte
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">gte</span> (<span class="hljs-params">a, b, loose</span>) </span>{
  <span class="hljs-keyword">return</span> compare(a, b, loose) &gt;= <span class="hljs-number">0</span>
}

exports.lte = lte
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lte</span> (<span class="hljs-params">a, b, loose</span>) </span>{
  <span class="hljs-keyword">return</span> compare(a, b, loose) &lt;= <span class="hljs-number">0</span>
}

exports.cmp = cmp
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cmp</span> (<span class="hljs-params">a, op, b, loose</span>) </span>{
  <span class="hljs-keyword">switch</span> (op) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'==='</span>:
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> a === <span class="hljs-string">'object'</span>)
        a = a.version
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> b === <span class="hljs-string">'object'</span>)
        b = b.version
      <span class="hljs-keyword">return</span> a === b

    <span class="hljs-keyword">case</span> <span class="hljs-string">'!=='</span>:
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> a === <span class="hljs-string">'object'</span>)
        a = a.version
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> b === <span class="hljs-string">'object'</span>)
        b = b.version
      <span class="hljs-keyword">return</span> a !== b

    <span class="hljs-keyword">case</span> <span class="hljs-string">''</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'='</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'=='</span>:
      <span class="hljs-keyword">return</span> eq(a, b, loose)

    <span class="hljs-keyword">case</span> <span class="hljs-string">'!='</span>:
      <span class="hljs-keyword">return</span> neq(a, b, loose)

    <span class="hljs-keyword">case</span> <span class="hljs-string">'&gt;'</span>:
      <span class="hljs-keyword">return</span> gt(a, b, loose)

    <span class="hljs-keyword">case</span> <span class="hljs-string">'&gt;='</span>:
      <span class="hljs-keyword">return</span> gte(a, b, loose)

    <span class="hljs-keyword">case</span> <span class="hljs-string">'&lt;'</span>:
      <span class="hljs-keyword">return</span> lt(a, b, loose)

    <span class="hljs-keyword">case</span> <span class="hljs-string">'&lt;='</span>:
      <span class="hljs-keyword">return</span> lte(a, b, loose)

    <span class="hljs-attr">default</span>:
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Invalid operator: '</span> + op)
  }
}

exports.Comparator = Comparator
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Comparator</span> (<span class="hljs-params">comp, options</span>) </span>{
  <span class="hljs-keyword">if</span> (!options || <span class="hljs-keyword">typeof</span> options !== <span class="hljs-string">'object'</span>) {
    options = {
      <span class="hljs-attr">loose</span>: !!options,
      <span class="hljs-attr">includePrerelease</span>: <span class="hljs-literal">false</span>
    }
  }

  <span class="hljs-keyword">if</span> (comp <span class="hljs-keyword">instanceof</span> Comparator) {
    <span class="hljs-keyword">if</span> (comp.loose === !!options.loose) {
      <span class="hljs-keyword">return</span> comp
    } <span class="hljs-keyword">else</span> {
      comp = comp.value
    }
  }

  <span class="hljs-keyword">if</span> (!(<span class="hljs-keyword">this</span> <span class="hljs-keyword">instanceof</span> Comparator)) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Comparator(comp, options)
  }

  comp = comp.trim().split(<span class="hljs-regexp">/\s+/</span>).join(<span class="hljs-string">' '</span>)
  debug(<span class="hljs-string">'comparator'</span>, comp, options)
  <span class="hljs-keyword">this</span>.options = options
  <span class="hljs-keyword">this</span>.loose = !!options.loose
  <span class="hljs-keyword">this</span>.parse(comp)

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.semver === ANY) {
    <span class="hljs-keyword">this</span>.value = <span class="hljs-string">''</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">this</span>.value = <span class="hljs-keyword">this</span>.operator + <span class="hljs-keyword">this</span>.semver.version
  }

  debug(<span class="hljs-string">'comp'</span>, <span class="hljs-keyword">this</span>)
}

<span class="hljs-keyword">var</span> ANY = {}
Comparator.prototype.parse = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">comp</span>) </span>{
  <span class="hljs-keyword">var</span> r = <span class="hljs-keyword">this</span>.options.loose ? safeRe[t.COMPARATORLOOSE] : safeRe[t.COMPARATOR]
  <span class="hljs-keyword">var</span> m = comp.match(r)

  <span class="hljs-keyword">if</span> (!m) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Invalid comparator: '</span> + comp)
  }

  <span class="hljs-keyword">this</span>.operator = m[<span class="hljs-number">1</span>] !== <span class="hljs-literal">undefined</span> ? m[<span class="hljs-number">1</span>] : <span class="hljs-string">''</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.operator === <span class="hljs-string">'='</span>) {
    <span class="hljs-keyword">this</span>.operator = <span class="hljs-string">''</span>
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-40" id="section-40"></a>
</div>
<p>if it literally is just '&gt;' or '' then allow anything.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (!m[<span class="hljs-number">2</span>]) {
    <span class="hljs-keyword">this</span>.semver = ANY
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">this</span>.semver = <span class="hljs-keyword">new</span> SemVer(m[<span class="hljs-number">2</span>], <span class="hljs-keyword">this</span>.options.loose)
  }
}

Comparator.prototype.toString = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.value
}

Comparator.prototype.test = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">version</span>) </span>{
  debug(<span class="hljs-string">'Comparator.test'</span>, version, <span class="hljs-keyword">this</span>.options.loose)

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.semver === ANY || version === ANY) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> version === <span class="hljs-string">'string'</span>) {
    <span class="hljs-keyword">try</span> {
      version = <span class="hljs-keyword">new</span> SemVer(version, <span class="hljs-keyword">this</span>.options)
    } <span class="hljs-keyword">catch</span> (er) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
  }

  <span class="hljs-keyword">return</span> cmp(version, <span class="hljs-keyword">this</span>.operator, <span class="hljs-keyword">this</span>.semver, <span class="hljs-keyword">this</span>.options)
}

Comparator.prototype.intersects = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">comp, options</span>) </span>{
  <span class="hljs-keyword">if</span> (!(comp <span class="hljs-keyword">instanceof</span> Comparator)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'a Comparator is required'</span>)
  }

  <span class="hljs-keyword">if</span> (!options || <span class="hljs-keyword">typeof</span> options !== <span class="hljs-string">'object'</span>) {
    options = {
      <span class="hljs-attr">loose</span>: !!options,
      <span class="hljs-attr">includePrerelease</span>: <span class="hljs-literal">false</span>
    }
  }

  <span class="hljs-keyword">var</span> rangeTmp

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.operator === <span class="hljs-string">''</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.value === <span class="hljs-string">''</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    }
    rangeTmp = <span class="hljs-keyword">new</span> Range(comp.value, options)
    <span class="hljs-keyword">return</span> satisfies(<span class="hljs-keyword">this</span>.value, rangeTmp, options)
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (comp.operator === <span class="hljs-string">''</span>) {
    <span class="hljs-keyword">if</span> (comp.value === <span class="hljs-string">''</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    }
    rangeTmp = <span class="hljs-keyword">new</span> Range(<span class="hljs-keyword">this</span>.value, options)
    <span class="hljs-keyword">return</span> satisfies(comp.semver, rangeTmp, options)
  }

  <span class="hljs-keyword">var</span> sameDirectionIncreasing =
    (<span class="hljs-keyword">this</span>.operator === <span class="hljs-string">'&gt;='</span> || <span class="hljs-keyword">this</span>.operator === <span class="hljs-string">'&gt;'</span>) &amp;&amp;
    (comp.operator === <span class="hljs-string">'&gt;='</span> || comp.operator === <span class="hljs-string">'&gt;'</span>)
  <span class="hljs-keyword">var</span> sameDirectionDecreasing =
    (<span class="hljs-keyword">this</span>.operator === <span class="hljs-string">'&lt;='</span> || <span class="hljs-keyword">this</span>.operator === <span class="hljs-string">'&lt;'</span>) &amp;&amp;
    (comp.operator === <span class="hljs-string">'&lt;='</span> || comp.operator === <span class="hljs-string">'&lt;'</span>)
  <span class="hljs-keyword">var</span> sameSemVer = <span class="hljs-keyword">this</span>.semver.version === comp.semver.version
  <span class="hljs-keyword">var</span> differentDirectionsInclusive =
    (<span class="hljs-keyword">this</span>.operator === <span class="hljs-string">'&gt;='</span> || <span class="hljs-keyword">this</span>.operator === <span class="hljs-string">'&lt;='</span>) &amp;&amp;
    (comp.operator === <span class="hljs-string">'&gt;='</span> || comp.operator === <span class="hljs-string">'&lt;='</span>)
  <span class="hljs-keyword">var</span> oppositeDirectionsLessThan =
    cmp(<span class="hljs-keyword">this</span>.semver, <span class="hljs-string">'&lt;'</span>, comp.semver, options) &amp;&amp;
    ((<span class="hljs-keyword">this</span>.operator === <span class="hljs-string">'&gt;='</span> || <span class="hljs-keyword">this</span>.operator === <span class="hljs-string">'&gt;'</span>) &amp;&amp;
    (comp.operator === <span class="hljs-string">'&lt;='</span> || comp.operator === <span class="hljs-string">'&lt;'</span>))
  <span class="hljs-keyword">var</span> oppositeDirectionsGreaterThan =
    cmp(<span class="hljs-keyword">this</span>.semver, <span class="hljs-string">'&gt;'</span>, comp.semver, options) &amp;&amp;
    ((<span class="hljs-keyword">this</span>.operator === <span class="hljs-string">'&lt;='</span> || <span class="hljs-keyword">this</span>.operator === <span class="hljs-string">'&lt;'</span>) &amp;&amp;
    (comp.operator === <span class="hljs-string">'&gt;='</span> || comp.operator === <span class="hljs-string">'&gt;'</span>))

  <span class="hljs-keyword">return</span> sameDirectionIncreasing || sameDirectionDecreasing ||
    (sameSemVer &amp;&amp; differentDirectionsInclusive) ||
    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan
}

exports.Range = Range
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Range</span> (<span class="hljs-params">range, options</span>) </span>{
  <span class="hljs-keyword">if</span> (!options || <span class="hljs-keyword">typeof</span> options !== <span class="hljs-string">'object'</span>) {
    options = {
      <span class="hljs-attr">loose</span>: !!options,
      <span class="hljs-attr">includePrerelease</span>: <span class="hljs-literal">false</span>
    }
  }

  <span class="hljs-keyword">if</span> (range <span class="hljs-keyword">instanceof</span> Range) {
    <span class="hljs-keyword">if</span> (range.loose === !!options.loose &amp;&amp;
        range.includePrerelease === !!options.includePrerelease) {
      <span class="hljs-keyword">return</span> range
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Range(range.raw, options)
    }
  }

  <span class="hljs-keyword">if</span> (range <span class="hljs-keyword">instanceof</span> Comparator) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Range(range.value, options)
  }

  <span class="hljs-keyword">if</span> (!(<span class="hljs-keyword">this</span> <span class="hljs-keyword">instanceof</span> Range)) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Range(range, options)
  }

  <span class="hljs-keyword">this</span>.options = options
  <span class="hljs-keyword">this</span>.loose = !!options.loose
  <span class="hljs-keyword">this</span>.includePrerelease = !!options.includePrerelease

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-41" id="section-41"></a>
</div>
<p>First reduce all whitespace as much as possible so we do not have to rely
on potentially slow regexes like \s*. This is then stored and used for
future error messages as well.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">this</span>.raw = range
    .trim()
    .split(<span class="hljs-regexp">/\s+/</span>)
    .join(<span class="hljs-string">' '</span>)

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-42" id="section-42"></a>
</div>
<p>First, split based on boolean or ||</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">this</span>.set = <span class="hljs-keyword">this</span>.raw.split(<span class="hljs-string">'||'</span>).map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">range</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.parseRange(range.trim())
  }, <span class="hljs-keyword">this</span>).filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">c</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-43" id="section-43"></a>
</div>
<p>throw out any that are not relevant for whatever reason</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">return</span> c.length
  })

  <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.set.length) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Invalid SemVer Range: '</span> + <span class="hljs-keyword">this</span>.raw)
  }

  <span class="hljs-keyword">this</span>.format()
}

Range.prototype.format = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">this</span>.range = <span class="hljs-keyword">this</span>.set.map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">comps</span>) </span>{
    <span class="hljs-keyword">return</span> comps.join(<span class="hljs-string">' '</span>).trim()
  }).join(<span class="hljs-string">'||'</span>).trim()
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.range
}

Range.prototype.toString = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.range
}

Range.prototype.parseRange = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">range</span>) </span>{
  <span class="hljs-keyword">var</span> loose = <span class="hljs-keyword">this</span>.options.loose
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-44" id="section-44"></a>
</div>
<p><code>1.2.3 - 1.2.4</code> =&gt; <code>&gt;=1.2.3 &lt;=1.2.4</code></p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">var</span> hr = loose ? safeRe[t.HYPHENRANGELOOSE] : safeRe[t.HYPHENRANGE]
  range = range.replace(hr, hyphenReplace)
  debug(<span class="hljs-string">'hyphen replace'</span>, range)
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-45" id="section-45"></a>
</div>
<p><code>&gt; 1.2.3 &lt; 1.2.5</code> =&gt; <code>&gt;1.2.3 &lt;1.2.5</code></p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  range = range.replace(safeRe[t.COMPARATORTRIM], comparatorTrimReplace)
  debug(<span class="hljs-string">'comparator trim'</span>, range, safeRe[t.COMPARATORTRIM])

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-46" id="section-46"></a>
</div>
<p><code>~ 1.2.3</code> =&gt; <code>~1.2.3</code></p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  range = range.replace(safeRe[t.TILDETRIM], tildeTrimReplace)

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-47" id="section-47"></a>
</div>
<p><code>^ 1.2.3</code> =&gt; <code>^1.2.3</code></p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  range = range.replace(safeRe[t.CARETTRIM], caretTrimReplace)

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-48" id="section-48"></a>
</div>
<p>normalize spaces</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  range = range.split(<span class="hljs-regexp">/\s+/</span>).join(<span class="hljs-string">' '</span>)

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-49" id="section-49"></a>
</div>
<p>At this point, the range is completely trimmed and
ready to be split into comparators.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-keyword">var</span> compRe = loose ? safeRe[t.COMPARATORLOOSE] : safeRe[t.COMPARATOR]
  <span class="hljs-keyword">var</span> <span class="hljs-keyword">set</span> = range.split(' ').map(function (comp) {
    <span class="hljs-keyword">return</span> parseComparator(comp, <span class="hljs-keyword">this</span>.options)
  }, <span class="hljs-keyword">this</span>).join(<span class="hljs-string">' '</span>).split(<span class="hljs-regexp">/\s+/</span>)
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.loose) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-50" id="section-50"></a>
</div>
<p>in loose mode, throw out any that are not valid comparators</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">set</span> = <span class="hljs-keyword">set</span>.filter(function (comp) {
      <span class="hljs-keyword">return</span> !!comp.match(compRe)
    })
  }
  <span class="hljs-keyword">set</span> = <span class="hljs-keyword">set</span>.map(function (comp) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Comparator(comp, <span class="hljs-keyword">this</span>.options)
  }, <span class="hljs-keyword">this</span>)

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">set</span>
}

Range.prototype.intersects = function (range, options) {
  <span class="hljs-keyword">if</span> (!(range <span class="hljs-keyword">instanceof</span> Range)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'a Range is required'</span>)
  }

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.set.some(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">thisComparators</span>) </span>{
    <span class="hljs-keyword">return</span> (
      isSatisfiable(thisComparators, options) &amp;&amp;
      range.set.some(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">rangeComparators</span>) </span>{
        <span class="hljs-keyword">return</span> (
          isSatisfiable(rangeComparators, options) &amp;&amp;
          thisComparators.every(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">thisComparator</span>) </span>{
            <span class="hljs-keyword">return</span> rangeComparators.every(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">rangeComparator</span>) </span>{
              <span class="hljs-keyword">return</span> thisComparator.intersects(rangeComparator, options)
            })
          })
        )
      })
    )
  })
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-51" id="section-51"></a>
</div>
<p>take a set of comparators and determine whether there
exists a version which can satisfy it</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isSatisfiable</span> (<span class="hljs-params">comparators, options</span>) </span>{
  <span class="hljs-keyword">var</span> result = <span class="hljs-literal">true</span>
  <span class="hljs-keyword">var</span> remainingComparators = comparators.slice()
  <span class="hljs-keyword">var</span> testComparator = remainingComparators.pop()

  <span class="hljs-keyword">while</span> (result &amp;&amp; remainingComparators.length) {
    result = remainingComparators.every(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">otherComparator</span>) </span>{
      <span class="hljs-keyword">return</span> testComparator.intersects(otherComparator, options)
    })

    testComparator = remainingComparators.pop()
  }

  <span class="hljs-keyword">return</span> result
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-52" id="section-52"></a>
</div>
<p>Mostly just for testing and legacy API reasons</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">exports.toComparators = toComparators
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toComparators</span> (<span class="hljs-params">range, options</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Range(range, options).set.map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">comp</span>) </span>{
    <span class="hljs-keyword">return</span> comp.map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">c</span>) </span>{
      <span class="hljs-keyword">return</span> c.value
    }).join(<span class="hljs-string">' '</span>).trim().split(<span class="hljs-string">' '</span>)
  })
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-53" id="section-53"></a>
</div>
<p>comprised of xranges, tildes, stars, and gtlt's at this point.
already replaced the hyphen ranges
turn into a set of JUST comparators.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseComparator</span> (<span class="hljs-params">comp, options</span>) </span>{
  debug(<span class="hljs-string">'comp'</span>, comp, options)
  comp = replaceCarets(comp, options)
  debug(<span class="hljs-string">'caret'</span>, comp)
  comp = replaceTildes(comp, options)
  debug(<span class="hljs-string">'tildes'</span>, comp)
  comp = replaceXRanges(comp, options)
  debug(<span class="hljs-string">'xrange'</span>, comp)
  comp = replaceStars(comp, options)
  debug(<span class="hljs-string">'stars'</span>, comp)
  <span class="hljs-keyword">return</span> comp
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isX</span> (<span class="hljs-params">id</span>) </span>{
  <span class="hljs-keyword">return</span> !id || id.toLowerCase() === <span class="hljs-string">'x'</span> || id === <span class="hljs-string">'*'</span>
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-54" id="section-54"></a>
</div>
<p>~, ~&gt; --&gt; * (any, kinda silly)
~2, ~2.x, ~2.x.x, ~&gt;2, ~&gt;2.x ~&gt;2.x.x --&gt; &gt;=2.0.0 &lt;3.0.0
~2.0, ~2.0.x, ~&gt;2.0, ~&gt;2.0.x --&gt; &gt;=2.0.0 &lt;2.1.0
~1.2, ~1.2.x, ~&gt;1.2, ~&gt;1.2.x --&gt; &gt;=1.2.0 &lt;1.3.0
~1.2.3, ~&gt;1.2.3 --&gt; &gt;=1.2.3 &lt;1.3.0
~1.2.0, ~&gt;1.2.0 --&gt; &gt;=1.2.0 &lt;1.3.0</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">replaceTildes</span> (<span class="hljs-params">comp, options</span>) </span>{
  <span class="hljs-keyword">return</span> comp.trim().split(<span class="hljs-regexp">/\s+/</span>).map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">comp</span>) </span>{
    <span class="hljs-keyword">return</span> replaceTilde(comp, options)
  }).join(<span class="hljs-string">' '</span>)
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">replaceTilde</span> (<span class="hljs-params">comp, options</span>) </span>{
  <span class="hljs-keyword">var</span> r = options.loose ? safeRe[t.TILDELOOSE] : safeRe[t.TILDE]
  <span class="hljs-keyword">return</span> comp.replace(r, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">_, M, m, p, pr</span>) </span>{
    debug(<span class="hljs-string">'tilde'</span>, comp, _, M, m, p, pr)
    <span class="hljs-keyword">var</span> ret

    <span class="hljs-keyword">if</span> (isX(M)) {
      ret = <span class="hljs-string">''</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isX(m)) {
      ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.0.0 &lt;'</span> + (+M + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0.0'</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isX(p)) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-55" id="section-55"></a>
</div>
<p>~1.2 == &gt;=1.2.0 &lt;1.3.0</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.0 &lt;'</span> + M + <span class="hljs-string">'.'</span> + (+m + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0'</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pr) {
      debug(<span class="hljs-string">'replaceTilde pr'</span>, pr)
      ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.'</span> + p + <span class="hljs-string">'-'</span> + pr +
            <span class="hljs-string">' &lt;'</span> + M + <span class="hljs-string">'.'</span> + (+m + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0'</span>
    } <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-56" id="section-56"></a>
</div>
<p>~1.2.3 == &gt;=1.2.3 &lt;1.3.0</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.'</span> + p +
            <span class="hljs-string">' &lt;'</span> + M + <span class="hljs-string">'.'</span> + (+m + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0'</span>
    }

    debug(<span class="hljs-string">'tilde return'</span>, ret)
    <span class="hljs-keyword">return</span> ret
  })
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-57" id="section-57"></a>
</div>
<p>^ --&gt; * (any, kinda silly)
^2, ^2.x, ^2.x.x --&gt; &gt;=2.0.0 &lt;3.0.0
^2.0, ^2.0.x --&gt; &gt;=2.0.0 &lt;3.0.0
^1.2, ^1.2.x --&gt; &gt;=1.2.0 &lt;2.0.0
^1.2.3 --&gt; &gt;=1.2.3 &lt;2.0.0
^1.2.0 --&gt; &gt;=1.2.0 &lt;2.0.0</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">replaceCarets</span> (<span class="hljs-params">comp, options</span>) </span>{
  <span class="hljs-keyword">return</span> comp.trim().split(<span class="hljs-regexp">/\s+/</span>).map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">comp</span>) </span>{
    <span class="hljs-keyword">return</span> replaceCaret(comp, options)
  }).join(<span class="hljs-string">' '</span>)
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">replaceCaret</span> (<span class="hljs-params">comp, options</span>) </span>{
  debug(<span class="hljs-string">'caret'</span>, comp, options)
  <span class="hljs-keyword">var</span> r = options.loose ? safeRe[t.CARETLOOSE] : safeRe[t.CARET]
  <span class="hljs-keyword">return</span> comp.replace(r, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">_, M, m, p, pr</span>) </span>{
    debug(<span class="hljs-string">'caret'</span>, comp, _, M, m, p, pr)
    <span class="hljs-keyword">var</span> ret

    <span class="hljs-keyword">if</span> (isX(M)) {
      ret = <span class="hljs-string">''</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isX(m)) {
      ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.0.0 &lt;'</span> + (+M + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0.0'</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isX(p)) {
      <span class="hljs-keyword">if</span> (M === <span class="hljs-string">'0'</span>) {
        ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.0 &lt;'</span> + M + <span class="hljs-string">'.'</span> + (+m + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0'</span>
      } <span class="hljs-keyword">else</span> {
        ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.0 &lt;'</span> + (+M + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0.0'</span>
      }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pr) {
      debug(<span class="hljs-string">'replaceCaret pr'</span>, pr)
      <span class="hljs-keyword">if</span> (M === <span class="hljs-string">'0'</span>) {
        <span class="hljs-keyword">if</span> (m === <span class="hljs-string">'0'</span>) {
          ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.'</span> + p + <span class="hljs-string">'-'</span> + pr +
                <span class="hljs-string">' &lt;'</span> + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.'</span> + (+p + <span class="hljs-number">1</span>)
        } <span class="hljs-keyword">else</span> {
          ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.'</span> + p + <span class="hljs-string">'-'</span> + pr +
                <span class="hljs-string">' &lt;'</span> + M + <span class="hljs-string">'.'</span> + (+m + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0'</span>
        }
      } <span class="hljs-keyword">else</span> {
        ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.'</span> + p + <span class="hljs-string">'-'</span> + pr +
              <span class="hljs-string">' &lt;'</span> + (+M + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0.0'</span>
      }
    } <span class="hljs-keyword">else</span> {
      debug(<span class="hljs-string">'no pr'</span>)
      <span class="hljs-keyword">if</span> (M === <span class="hljs-string">'0'</span>) {
        <span class="hljs-keyword">if</span> (m === <span class="hljs-string">'0'</span>) {
          ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.'</span> + p +
                <span class="hljs-string">' &lt;'</span> + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.'</span> + (+p + <span class="hljs-number">1</span>)
        } <span class="hljs-keyword">else</span> {
          ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.'</span> + p +
                <span class="hljs-string">' &lt;'</span> + M + <span class="hljs-string">'.'</span> + (+m + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0'</span>
        }
      } <span class="hljs-keyword">else</span> {
        ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.'</span> + p +
              <span class="hljs-string">' &lt;'</span> + (+M + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0.0'</span>
      }
    }

    debug(<span class="hljs-string">'caret return'</span>, ret)
    <span class="hljs-keyword">return</span> ret
  })
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">replaceXRanges</span> (<span class="hljs-params">comp, options</span>) </span>{
  debug(<span class="hljs-string">'replaceXRanges'</span>, comp, options)
  <span class="hljs-keyword">return</span> comp.split(<span class="hljs-regexp">/\s+/</span>).map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">comp</span>) </span>{
    <span class="hljs-keyword">return</span> replaceXRange(comp, options)
  }).join(<span class="hljs-string">' '</span>)
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">replaceXRange</span> (<span class="hljs-params">comp, options</span>) </span>{
  comp = comp.trim()
  <span class="hljs-keyword">var</span> r = options.loose ? safeRe[t.XRANGELOOSE] : safeRe[t.XRANGE]
  <span class="hljs-keyword">return</span> comp.replace(r, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">ret, gtlt, M, m, p, pr</span>) </span>{
    debug(<span class="hljs-string">'xRange'</span>, comp, ret, gtlt, M, m, p, pr)
    <span class="hljs-keyword">var</span> xM = isX(M)
    <span class="hljs-keyword">var</span> xm = xM || isX(m)
    <span class="hljs-keyword">var</span> xp = xm || isX(p)
    <span class="hljs-keyword">var</span> anyX = xp

    <span class="hljs-keyword">if</span> (gtlt === <span class="hljs-string">'='</span> &amp;&amp; anyX) {
      gtlt = <span class="hljs-string">''</span>
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-58" id="section-58"></a>
</div>
<p>if we're including prereleases in the match, then we need
to fix this to -0, the lowest possible prerelease value</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    pr = options.includePrerelease ? <span class="hljs-string">'-0'</span> : <span class="hljs-string">''</span>

    <span class="hljs-keyword">if</span> (xM) {
      <span class="hljs-keyword">if</span> (gtlt === <span class="hljs-string">'&gt;'</span> || gtlt === <span class="hljs-string">'&lt;'</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-59" id="section-59"></a>
</div>
<p>nothing is allowed</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        ret = <span class="hljs-string">'&lt;0.0.0-0'</span>
      } <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-60" id="section-60"></a>
</div>
<p>nothing is forbidden</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        ret = <span class="hljs-string">'*'</span>
      }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (gtlt &amp;&amp; anyX) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-61" id="section-61"></a>
</div>
<p>we know patch is an x, because we have any x at all.
replace X with 0</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">if</span> (xm) {
        m = <span class="hljs-number">0</span>
      }
      p = <span class="hljs-number">0</span>

      <span class="hljs-keyword">if</span> (gtlt === <span class="hljs-string">'&gt;'</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-62" id="section-62"></a>
</div>
<blockquote>
<p>1 =&gt; &gt;=2.0.0
1.2 =&gt; &gt;=1.3.0
1.2.3 =&gt; &gt;= 1.2.4</p>
</blockquote>

        </td>
        <td class="code highlight">
          <pre class="javascript">        gtlt = <span class="hljs-string">'&gt;='</span>
        <span class="hljs-keyword">if</span> (xm) {
          M = +M + <span class="hljs-number">1</span>
          m = <span class="hljs-number">0</span>
          p = <span class="hljs-number">0</span>
        } <span class="hljs-keyword">else</span> {
          m = +m + <span class="hljs-number">1</span>
          p = <span class="hljs-number">0</span>
        }
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (gtlt === <span class="hljs-string">'&lt;='</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-63" id="section-63"></a>
</div>
<p>&lt;=0.7.x is actually &lt;0.8.0, since any 0.7.x should
pass.  Similarly, &lt;=7.x is actually &lt;8.0.0, etc.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        gtlt = <span class="hljs-string">'&lt;'</span>
        <span class="hljs-keyword">if</span> (xm) {
          M = +M + <span class="hljs-number">1</span>
        } <span class="hljs-keyword">else</span> {
          m = +m + <span class="hljs-number">1</span>
        }
      }

      ret = gtlt + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.'</span> + p + pr
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (xm) {
      ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.0.0'</span> + pr + <span class="hljs-string">' &lt;'</span> + (+M + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0.0'</span> + pr
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (xp) {
      ret = <span class="hljs-string">'&gt;='</span> + M + <span class="hljs-string">'.'</span> + m + <span class="hljs-string">'.0'</span> + pr +
        <span class="hljs-string">' &lt;'</span> + M + <span class="hljs-string">'.'</span> + (+m + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0'</span> + pr
    }

    debug(<span class="hljs-string">'xRange return'</span>, ret)

    <span class="hljs-keyword">return</span> ret
  })
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-64" id="section-64"></a>
</div>
<p>Because * is AND-ed with everything else in the comparator,
and '' means &quot;any version&quot;, just remove the *s entirely.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">replaceStars</span> (<span class="hljs-params">comp, options</span>) </span>{
  debug(<span class="hljs-string">'replaceStars'</span>, comp, options)
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-65" id="section-65"></a>
</div>
<p>Looseness is ignored here.  star is always as loose as it gets!</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">return</span> comp.trim().replace(safeRe[t.STAR], <span class="hljs-string">''</span>)
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-66" id="section-66"></a>
</div>
<p>This function is passed to string.replace(re[t.HYPHENRANGE])
M, m, patch, prerelease, build
1.2 - 3.4.5 =&gt; &gt;=1.2.0 &lt;=3.4.5
1.2.3 - 3.4 =&gt; &gt;=1.2.0 &lt;3.5.0 Any 3.4.x will do
1.2 - 3.4 =&gt; &gt;=1.2.0 &lt;3.5.0</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hyphenReplace</span> (<span class="hljs-params">$<span class="hljs-number">0</span>,
  from, fM, fm, fp, fpr, fb,
  to, tM, tm, tp, tpr, tb</span>) </span>{
  <span class="hljs-keyword">if</span> (isX(fM)) {
    <span class="hljs-keyword">from</span> = <span class="hljs-string">''</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isX(fm)) {
    <span class="hljs-keyword">from</span> = <span class="hljs-string">'&gt;='</span> + fM + <span class="hljs-string">'.0.0'</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isX(fp)) {
    <span class="hljs-keyword">from</span> = <span class="hljs-string">'&gt;='</span> + fM + <span class="hljs-string">'.'</span> + fm + <span class="hljs-string">'.0'</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">from</span> = <span class="hljs-string">'&gt;='</span> + <span class="hljs-keyword">from</span>
  }

  <span class="hljs-keyword">if</span> (isX(tM)) {
    to = <span class="hljs-string">''</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isX(tm)) {
    to = <span class="hljs-string">'&lt;'</span> + (+tM + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0.0'</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isX(tp)) {
    to = <span class="hljs-string">'&lt;'</span> + tM + <span class="hljs-string">'.'</span> + (+tm + <span class="hljs-number">1</span>) + <span class="hljs-string">'.0'</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (tpr) {
    to = <span class="hljs-string">'&lt;='</span> + tM + <span class="hljs-string">'.'</span> + tm + <span class="hljs-string">'.'</span> + tp + <span class="hljs-string">'-'</span> + tpr
  } <span class="hljs-keyword">else</span> {
    to = <span class="hljs-string">'&lt;='</span> + to
  }

  <span class="hljs-keyword">return</span> (<span class="hljs-keyword">from</span> + <span class="hljs-string">' '</span> + to).trim()
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-67" id="section-67"></a>
</div>
<p>if ANY of the sets match ALL of its comparators, then pass</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">Range.prototype.test = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">version</span>) </span>{
  <span class="hljs-keyword">if</span> (!version) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> version === <span class="hljs-string">'string'</span>) {
    <span class="hljs-keyword">try</span> {
      version = <span class="hljs-keyword">new</span> SemVer(version, <span class="hljs-keyword">this</span>.options)
    } <span class="hljs-keyword">catch</span> (er) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
  }

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>.set.length; i++) {
    <span class="hljs-keyword">if</span> (testSet(<span class="hljs-keyword">this</span>.set[i], version, <span class="hljs-keyword">this</span>.options)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    }
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">testSet</span> (<span class="hljs-params">set, version, options</span>) </span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">set</span>.length; i++) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">set</span>[i].test(version)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
  }

  <span class="hljs-keyword">if</span> (version.prerelease.length &amp;&amp; !options.includePrerelease) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-68" id="section-68"></a>
</div>
<p>Find the set of versions that are allowed to have prereleases
For example, ^1.2.3-pr.1 desugars to &gt;=1.2.3-pr.1 &lt;2.0.0
That should allow <code>1.2.3-pr.2</code> to pass.
However, <code>1.2.4-alpha.notready</code> should NOT be allowed,
even though it's within the range set by the comparators.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">set</span>.length; i++) {
      debug(<span class="hljs-keyword">set</span>[i].semver)
      if (<span class="hljs-keyword">set</span>[i].semver === ANY) {
        <span class="hljs-keyword">continue</span>
      }

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">set</span>[i].semver.prerelease.length &gt; 0) {
        <span class="hljs-keyword">var</span> allowed = <span class="hljs-keyword">set</span>[i].semver
        if (allowed.major === version.major &amp;&amp;
            allowed.minor === version.minor &amp;&amp;
            allowed.patch === version.patch) {
          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
        }
      }
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-69" id="section-69"></a>
</div>
<p>Version has a -pre, but it's not one of the ones we like.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }

  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
}

exports.satisfies = satisfies
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">satisfies</span> (<span class="hljs-params">version, range, options</span>) </span>{
  <span class="hljs-keyword">try</span> {
    range = <span class="hljs-keyword">new</span> Range(range, options)
  } <span class="hljs-keyword">catch</span> (er) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }
  <span class="hljs-keyword">return</span> range.test(version)
}

exports.maxSatisfying = maxSatisfying
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">maxSatisfying</span> (<span class="hljs-params">versions, range, options</span>) </span>{
  <span class="hljs-keyword">var</span> max = <span class="hljs-literal">null</span>
  <span class="hljs-keyword">var</span> maxSV = <span class="hljs-literal">null</span>
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">var</span> rangeObj = <span class="hljs-keyword">new</span> Range(range, options)
  } <span class="hljs-keyword">catch</span> (er) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
  }
  versions.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
    <span class="hljs-keyword">if</span> (rangeObj.test(v)) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-70" id="section-70"></a>
</div>
<p>satisfies(v, range, options)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">if</span> (!max || maxSV.compare(v) === <span class="hljs-number">-1</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-71" id="section-71"></a>
</div>
<p>compare(max, v, true)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        max = v
        maxSV = <span class="hljs-keyword">new</span> SemVer(max, options)
      }
    }
  })
  <span class="hljs-keyword">return</span> max
}

exports.minSatisfying = minSatisfying
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">minSatisfying</span> (<span class="hljs-params">versions, range, options</span>) </span>{
  <span class="hljs-keyword">var</span> min = <span class="hljs-literal">null</span>
  <span class="hljs-keyword">var</span> minSV = <span class="hljs-literal">null</span>
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">var</span> rangeObj = <span class="hljs-keyword">new</span> Range(range, options)
  } <span class="hljs-keyword">catch</span> (er) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
  }
  versions.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">v</span>) </span>{
    <span class="hljs-keyword">if</span> (rangeObj.test(v)) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-72" id="section-72"></a>
</div>
<p>satisfies(v, range, options)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">if</span> (!min || minSV.compare(v) === <span class="hljs-number">1</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-73" id="section-73"></a>
</div>
<p>compare(min, v, true)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        min = v
        minSV = <span class="hljs-keyword">new</span> SemVer(min, options)
      }
    }
  })
  <span class="hljs-keyword">return</span> min
}

exports.minVersion = minVersion
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">minVersion</span> (<span class="hljs-params">range, loose</span>) </span>{
  range = <span class="hljs-keyword">new</span> Range(range, loose)

  <span class="hljs-keyword">var</span> minver = <span class="hljs-keyword">new</span> SemVer(<span class="hljs-string">'0.0.0'</span>)
  <span class="hljs-keyword">if</span> (range.test(minver)) {
    <span class="hljs-keyword">return</span> minver
  }

  minver = <span class="hljs-keyword">new</span> SemVer(<span class="hljs-string">'0.0.0-0'</span>)
  <span class="hljs-keyword">if</span> (range.test(minver)) {
    <span class="hljs-keyword">return</span> minver
  }

  minver = <span class="hljs-literal">null</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; range.set.length; ++i) {
    <span class="hljs-keyword">var</span> comparators = range.set[i]

    comparators.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">comparator</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-74" id="section-74"></a>
</div>
<p>Clone to avoid manipulating the comparator's semver object.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">      <span class="hljs-keyword">var</span> compver = <span class="hljs-keyword">new</span> SemVer(comparator.semver.version)
      <span class="hljs-keyword">switch</span> (comparator.operator) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">'&gt;'</span>:
          <span class="hljs-keyword">if</span> (compver.prerelease.length === <span class="hljs-number">0</span>) {
            compver.patch++
          } <span class="hljs-keyword">else</span> {
            compver.prerelease.push(<span class="hljs-number">0</span>)
          }
          compver.raw = compver.format()
          <span class="hljs-comment">/* fallthrough */</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">''</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'&gt;='</span>:
          <span class="hljs-keyword">if</span> (!minver || gt(minver, compver)) {
            minver = compver
          }
          <span class="hljs-keyword">break</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'&lt;'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'&lt;='</span>:
          <span class="hljs-comment">/* Ignore maximum versions */</span>
          <span class="hljs-keyword">break</span>
        <span class="hljs-comment">/* istanbul ignore next */</span>
        <span class="hljs-attr">default</span>:
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Unexpected operation: '</span> + comparator.operator)
      }
    })
  }

  <span class="hljs-keyword">if</span> (minver &amp;&amp; range.test(minver)) {
    <span class="hljs-keyword">return</span> minver
  }

  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
}

exports.validRange = validRange
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validRange</span> (<span class="hljs-params">range, options</span>) </span>{
  <span class="hljs-keyword">try</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-75" id="section-75"></a>
</div>
<p>Return '*' instead of '' so that truthiness works.
This will throw if it's invalid anyway</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Range(range, options).range || <span class="hljs-string">'*'</span>
  } <span class="hljs-keyword">catch</span> (er) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
  }
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-76" id="section-76"></a>
</div>
<p>Determine if version is less than all the versions possible in the range</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">exports.ltr = ltr
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ltr</span> (<span class="hljs-params">version, range, options</span>) </span>{
  <span class="hljs-keyword">return</span> outside(version, range, <span class="hljs-string">'&lt;'</span>, options)
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-77" id="section-77"></a>
</div>
<p>Determine if version is greater than all the versions possible in the range.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">exports.gtr = gtr
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">gtr</span> (<span class="hljs-params">version, range, options</span>) </span>{
  <span class="hljs-keyword">return</span> outside(version, range, <span class="hljs-string">'&gt;'</span>, options)
}

exports.outside = outside
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">outside</span> (<span class="hljs-params">version, range, hilo, options</span>) </span>{
  version = <span class="hljs-keyword">new</span> SemVer(version, options)
  range = <span class="hljs-keyword">new</span> Range(range, options)

  <span class="hljs-keyword">var</span> gtfn, ltefn, ltfn, comp, ecomp
  <span class="hljs-keyword">switch</span> (hilo) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'&gt;'</span>:
      gtfn = gt
      ltefn = lte
      ltfn = lt
      comp = <span class="hljs-string">'&gt;'</span>
      ecomp = <span class="hljs-string">'&gt;='</span>
      <span class="hljs-keyword">break</span>
    <span class="hljs-keyword">case</span> <span class="hljs-string">'&lt;'</span>:
      gtfn = lt
      ltefn = gte
      ltfn = gt
      comp = <span class="hljs-string">'&lt;'</span>
      ecomp = <span class="hljs-string">'&lt;='</span>
      <span class="hljs-keyword">break</span>
    <span class="hljs-attr">default</span>:
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'Must provide a hilo val of "&lt;" or "&gt;"'</span>)
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-78" id="section-78"></a>
</div>
<p>If it satisifes the range it is not outside</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">  <span class="hljs-keyword">if</span> (satisfies(version, range, options)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-79" id="section-79"></a>
</div>
<p>From now on, variable terms are as if we're in &quot;gtr&quot; mode.
but note that everything is flipped for the &quot;ltr&quot; function.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; range.set.length; ++i) {
    <span class="hljs-keyword">var</span> comparators = range.set[i]

    <span class="hljs-keyword">var</span> high = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">var</span> low = <span class="hljs-literal">null</span>

    comparators.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">comparator</span>) </span>{
      <span class="hljs-keyword">if</span> (comparator.semver === ANY) {
        comparator = <span class="hljs-keyword">new</span> Comparator(<span class="hljs-string">'&gt;=0.0.0'</span>)
      }
      high = high || comparator
      low = low || comparator
      <span class="hljs-keyword">if</span> (gtfn(comparator.semver, high.semver, options)) {
        high = comparator
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ltfn(comparator.semver, low.semver, options)) {
        low = comparator
      }
    })

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-80" id="section-80"></a>
</div>
<p>If the edge version comparator has a operator then our version
isn't outside it</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (high.operator === comp || high.operator === ecomp) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-81" id="section-81"></a>
</div>
<p>If the lowest version comparator has an operator and our version
is less than it then it isn't higher than the range</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> ((!low.operator || low.operator === comp) &amp;&amp;
        ltefn(version, low.semver)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (low.operator === ecomp &amp;&amp; ltfn(version, low.semver)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
}

exports.prerelease = prerelease
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">prerelease</span> (<span class="hljs-params">version, options</span>) </span>{
  <span class="hljs-keyword">var</span> parsed = parse(version, options)
  <span class="hljs-keyword">return</span> (parsed &amp;&amp; parsed.prerelease.length) ? parsed.prerelease : <span class="hljs-literal">null</span>
}

exports.intersects = intersects
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">intersects</span> (<span class="hljs-params">r1, r2, options</span>) </span>{
  r1 = <span class="hljs-keyword">new</span> Range(r1, options)
  r2 = <span class="hljs-keyword">new</span> Range(r2, options)
  <span class="hljs-keyword">return</span> r1.intersects(r2)
}

exports.coerce = coerce
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">coerce</span> (<span class="hljs-params">version, options</span>) </span>{
  <span class="hljs-keyword">if</span> (version <span class="hljs-keyword">instanceof</span> SemVer) {
    <span class="hljs-keyword">return</span> version
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> version === <span class="hljs-string">'number'</span>) {
    version = <span class="hljs-built_in">String</span>(version)
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> version !== <span class="hljs-string">'string'</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
  }

  options = options || {}

  <span class="hljs-keyword">var</span> match = <span class="hljs-literal">null</span>
  <span class="hljs-keyword">if</span> (!options.rtl) {
    match = version.match(safeRe[t.COERCE])
  } <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-82" id="section-82"></a>
</div>
<p>Find the right-most coercible string that does not share
a terminus with a more left-ward coercible string.
Eg, '1.2.3.4' wants to coerce '2.3.4', not '3.4' or '4'</p>
<p>Walk through the string checking with a /g regexp
Manually set the index so as to pick up overlapping matches.
Stop when we get a match that ends at the string end, since no
coercible string can be more right-ward without the same terminus.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">var</span> next
    <span class="hljs-keyword">while</span> ((next = safeRe[t.COERCERTL].exec(version)) &amp;&amp;
      (!match || match.index + match[<span class="hljs-number">0</span>].length !== version.length)
    ) {
      <span class="hljs-keyword">if</span> (!match ||
          next.index + next[<span class="hljs-number">0</span>].length !== match.index + match[<span class="hljs-number">0</span>].length) {
        match = next
      }
      safeRe[t.COERCERTL].lastIndex = next.index + next[<span class="hljs-number">1</span>].length + next[<span class="hljs-number">2</span>].length
    }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-83" id="section-83"></a>
</div>
<p>leave it in a clean state</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    safeRe[t.COERCERTL].lastIndex = <span class="hljs-number">-1</span>
  }

  <span class="hljs-keyword">if</span> (match === <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
  }

  <span class="hljs-keyword">return</span> parse(match[<span class="hljs-number">2</span>] +
    <span class="hljs-string">'.'</span> + (match[<span class="hljs-number">3</span>] || <span class="hljs-string">'0'</span>) +
    <span class="hljs-string">'.'</span> + (match[<span class="hljs-number">4</span>] || <span class="hljs-string">'0'</span>), options)
}

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
