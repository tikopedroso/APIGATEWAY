<!DOCTYPE html>
<html>
<head>
  <title>docker</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../";
    var thisFile = "node_modules\\docker\\docker";
    var defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>docker</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-meta">#!/usr/bin/env node</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<p>Require all node modules</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">var</span> program = <span class="hljs-built_in">require</span>(<span class="hljs-string">'commander'</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<p>Require <a href="src/docker.js.html">Docker</a></p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> Docker = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./src/docker.js'</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<p>Figure out PWD because it doesn't exist in process.env on windows.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> pwd = path.resolve(<span class="hljs-string">'.'</span>);

<span class="hljs-keyword">var</span> pkg = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./package.json'</span>);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">list</span>(<span class="hljs-params">val</span>) </span>{
  <span class="hljs-keyword">return</span> val.split(<span class="hljs-string">','</span>);
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<p>All program arguments using commander</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">program
  .version(pkg.version)
  .option(<span class="hljs-string">'-i, --input_dir [dir]'</span>, <span class="hljs-string">'Input directory (defaults to current dir)'</span>, pwd)
  .option(<span class="hljs-string">'-o, --output_dir [dir]'</span>, <span class="hljs-string">'Output directory (defaults to ./doc)'</span>, path.join(pwd, <span class="hljs-string">'doc'</span>))
  .option(<span class="hljs-string">'-u, --updated_files'</span>, <span class="hljs-string">'Only process files that have been changed'</span>)
  .option(<span class="hljs-string">'-c, --colour_scheme [style]'</span>, <span class="hljs-string">'Colour scheme to use (see https://github.com/isagalaev/highlight.js/tree/master/src/styles)'</span>)
  .option(<span class="hljs-string">'-I, --ignore_hidden'</span>, <span class="hljs-string">'Ignore hidden files and directories (those starting with . or _)'</span>)
  .option(<span class="hljs-string">'-w, --watch'</span>, <span class="hljs-string">'Watch on the input directory for file changes (experimental)'</span>)
  .option(<span class="hljs-string">'-s, --sidebar [state]'</span>, <span class="hljs-string">'Whether the sidebar should be open or not by default'</span>, <span class="hljs-string">'yes'</span>)
  .option(<span class="hljs-string">'-x, --exclude [pattern]'</span>, <span class="hljs-string">'Paths to exclude'</span>, <span class="hljs-literal">false</span>)
  .option(<span class="hljs-string">'-n, --line-numbers'</span>, <span class="hljs-string">'Whether to include line numbers in output'</span>, <span class="hljs-literal">false</span>)
  .option(<span class="hljs-string">'-m, --multi_line_only'</span>, <span class="hljs-string">'Whether to process only multi-line comments'</span>, <span class="hljs-literal">false</span>)
  .option(<span class="hljs-string">'--js &lt;files&gt;'</span>, <span class="hljs-string">'Additional javascript files to include'</span>, list)
  .option(<span class="hljs-string">'--css &lt;files&gt;'</span>, <span class="hljs-string">'Additional CSS files to include'</span>, list)
  .option(<span class="hljs-string">'--extras &lt;extras&gt;'</span>, <span class="hljs-string">'Bundled extras to include, see extras dir'</span>, list)
  .parse(process.argv);


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<p>Super-simple function to test if ann argument is vaguely trueish or falseish.
Should match <code>true</code>, <code>false</code>, <code>0</code>, <code>1</code>, <code>'0'</code>, <code>'1'</code>, <code>'y'</code>, <code>'n'</code>, <code>'yes'</code>, <code>'no'</code>, <code>'ok'</code>, <code>'true'</code>, <code>'false'</code></p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">coerceSidebar</span>(<span class="hljs-params">input</span>) </span>{
  <span class="hljs-keyword">if</span> (input === <span class="hljs-string">'disable'</span>) <span class="hljs-keyword">return</span> input;
  <span class="hljs-keyword">if</span> (input === <span class="hljs-literal">true</span> || input === <span class="hljs-literal">false</span>) <span class="hljs-keyword">return</span> input;
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> input === <span class="hljs-string">'number'</span> || (+input + <span class="hljs-string">''</span> === input + <span class="hljs-string">''</span>)) <span class="hljs-keyword">return</span> !!+input;
  input = input.toString();
  <span class="hljs-keyword">return</span> input === <span class="hljs-string">''</span> ? <span class="hljs-literal">true</span> : <span class="hljs-regexp">/(y(es)?|ok|t(rue)?)/i</span>.test(input);
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<p>Put all the options into an object</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> opts = {
  <span class="hljs-attr">inDir</span>: program.input_dir,
  <span class="hljs-attr">outDir</span>: program.output_dir,
  <span class="hljs-attr">onlyUpdated</span>: program.updated_files,
  <span class="hljs-attr">colourScheme</span>: program.colour_scheme,
  <span class="hljs-attr">ignoreHidden</span>: program.ignore_hidden,
  <span class="hljs-attr">sidebarState</span>: coerceSidebar(program.sidebar),
  <span class="hljs-attr">exclude</span>: program.exclude,
  <span class="hljs-attr">lineNums</span>: program.lineNumbers,
  <span class="hljs-attr">multiLineOnly</span>: program.multi_line_only,
  <span class="hljs-attr">js</span>: program.js,
  <span class="hljs-attr">css</span>: program.css,
  <span class="hljs-attr">extras</span>: program.extras
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<p>Create docker instance</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> d = <span class="hljs-keyword">new</span> Docker(opts);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<p>If no file list is specified, just run on whole directory</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">if</span> (program.args.length === <span class="hljs-number">0</span>) program.args = [ <span class="hljs-string">'./'</span> ];

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<p>Set it running.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">if</span> (program.watch) {
  d.watch(program.args);
} <span class="hljs-keyword">else</span> {
  d.doc(program.args);
}

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
